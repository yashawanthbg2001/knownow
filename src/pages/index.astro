---
import { createClient } from "@libsql/client";
const client = createClient({
  url: import.meta.env.TURSO_DATABASE_URL,
  authToken: import.meta.env.TURSO_AUTH_TOKEN,
});

const rs = await client.execute("SELECT id, title, slug, image_url FROM articles ORDER BY id DESC LIMIT 12");
const articles = rs.rows;
---

<style>
  .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; padding: 2rem; }
  .card { border: 1px solid #eee; border-radius: 8px; overflow: hidden; transition: transform 0.2s; }
  .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
  .card img { width: 100%; height: 200px; object-fit: cover; }
  .card-content { padding: 1.5rem; }
  .card h2 { font-size: 1.25rem; margin-top: 0; }
  .btn { display: inline-block; background: #0070f3; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; }
</style>

<main>
  <h1 style="text-align: center; margin-top: 2rem;">KnowNow Tech Pulse</h1>
  <div class="grid">
    {articles.map((post) => (
      <div class="card">
        <img src={post.image_url || 'https://via.placeholder.com/400x200?text=Tech'} alt={post.title} />
        <div class="card-content">
          <h2>{post.title}</h2>
          <a href={`/article/${post.slug}`} class="btn">Read More</a>
        </div>
      </div>
    ))}
  </div>
</main>